@typeparam TItem where TItem : class

@RenderFormLoading()

@code {

    [Parameter] public bool Loading { get; set; } = true;

    internal RenderFragment RenderFormLoading()
    {
        return __builder =>
        {
            <text>
                <!-- Form Skeleton Loading State -->
                <RadzenCard Visible="@Loading" class="rz-p-4">
                    <!-- Form Header -->
                    <RadzenStack Gap="1rem" class="rz-mb-4">
                        <RadzenSkeleton Style="width: 40%; height: 2rem;" />
                        <RadzenSkeleton Style="width: 60%; height: 1rem;" />
                    </RadzenStack>

                    <RadzenStack Gap="1.5rem">
                        <!-- Form Fields Section -->
                        <RadzenRow Gap="1rem">
                            <!-- Left Column -->
                            <RadzenColumn Size="12" SizeMD="6">
                                <RadzenStack Gap="0.5rem">
                                    <RadzenSkeleton Style="width: 30%; height: 0.875rem;" />
                                    <RadzenSkeleton Style="width: 100%; height: 2.5rem;" />
                                </RadzenStack>
                            </RadzenColumn>

                            <!-- Right Column -->
                            <RadzenColumn Size="12" SizeMD="6">
                                <RadzenStack Gap="0.5rem">
                                    <RadzenSkeleton Style="width: 25%; height: 0.875rem;" />
                                    <RadzenSkeleton Style="width: 100%; height: 2.5rem;" />
                                </RadzenStack>
                            </RadzenColumn>
                        </RadzenRow>

                        <RadzenRow Gap="1rem">
                            <RadzenColumn Size="12" SizeMD="6">
                                <RadzenStack Gap="0.5rem">
                                    <RadzenSkeleton Style="width: 35%; height: 0.875rem;" />
                                    <RadzenSkeleton Style="width: 100%; height: 2.5rem;" />
                                </RadzenStack>
                            </RadzenColumn>

                            <RadzenColumn Size="12" SizeMD="6">
                                <RadzenStack Gap="0.5rem">
                                    <RadzenSkeleton Style="width: 28%; height: 0.875rem;" />
                                    <RadzenSkeleton Style="width: 100%; height: 2.5rem;" />
                                </RadzenStack>
                            </RadzenColumn>
                        </RadzenRow>

                        <RadzenRow Gap="1rem">
                            <RadzenColumn Size="12">
                                <RadzenStack Gap="0.5rem">
                                    <RadzenSkeleton Style="width: 20%; height: 0.875rem;" />
                                    <RadzenSkeleton Style="width: 100%; height: 5rem;" />
                                </RadzenStack>
                            </RadzenColumn>
                        </RadzenRow>

                        <!-- Line Items Table Section -->
                        <RadzenStack Gap="0.75rem" class="rz-mt-3">
                            <RadzenSkeleton Style="width: 25%; height: 1.25rem;" />

                            <RadzenTable>
                                <RadzenTableHeader>
                                    <RadzenTableHeaderRow>
                                        <RadzenTableHeaderCell Style="width: 40%;">
                                            <RadzenSkeleton Style="width: 60%;" />
                                        </RadzenTableHeaderCell>
                                        <RadzenTableHeaderCell Style="width: 15%;">
                                            <RadzenSkeleton Style="width: 70%;" />
                                        </RadzenTableHeaderCell>
                                        <RadzenTableHeaderCell Style="width: 15%;">
                                            <RadzenSkeleton Style="width: 70%;" />
                                        </RadzenTableHeaderCell>
                                        <RadzenTableHeaderCell Style="width: 20%;">
                                            <RadzenSkeleton Style="width: 65%;" />
                                        </RadzenTableHeaderCell>
                                        <RadzenTableHeaderCell Style="width: 10%;">
                                        </RadzenTableHeaderCell>
                                    </RadzenTableHeaderRow>
                                </RadzenTableHeader>
                                <RadzenTableBody>
                                    @for (int i = 0; i < 3; i++)
                                    {
                                        <RadzenTableRow>
                                            <RadzenTableCell>
                                                <RadzenSkeleton Animation="SkeletonAnimation.Wave" Style="width: 80%;" />
                                            </RadzenTableCell>
                                            <RadzenTableCell>
                                                <RadzenSkeleton Animation="SkeletonAnimation.Wave" Style="width: 60%;" />
                                            </RadzenTableCell>
                                            <RadzenTableCell>
                                                <RadzenSkeleton Animation="SkeletonAnimation.Wave" Style="width: 50%;" />
                                            </RadzenTableCell>
                                            <RadzenTableCell>
                                                <RadzenSkeleton Animation="SkeletonAnimation.Wave" Style="width: 70%;" />
                                            </RadzenTableCell>
                                            <RadzenTableCell>
                                                <RadzenStack Orientation="Orientation.Horizontal" Gap="0.5rem" JustifyContent="JustifyContent.End">
                                                    <RadzenSkeleton Variant="SkeletonVariant.Circular" Style="width: 1.5rem; height: 1.5rem;" />
                                                    <RadzenSkeleton Variant="SkeletonVariant.Circular" Style="width: 1.5rem; height: 1.5rem;" />
                                                </RadzenStack>
                                            </RadzenTableCell>
                                        </RadzenTableRow>
                                    }
                                </RadzenTableBody>
                            </RadzenTable>

                            <!-- Add Button -->
                            <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Start">
                                <RadzenSkeleton Style="width: 8rem; height: 2.25rem;" />
                            </RadzenStack>
                        </RadzenStack>

                        <!-- Form Actions -->
                        <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.End" Gap="0.75rem" class="rz-mt-4">
                            <RadzenSkeleton Style="width: 6rem; height: 2.25rem;" />
                            <RadzenSkeleton Style="width: 6rem; height: 2.25rem;" />
                        </RadzenStack>
                    </RadzenStack>
                </RadzenCard>
            </text>
        };
    }

}